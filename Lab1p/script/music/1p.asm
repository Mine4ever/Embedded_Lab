			ORG 0000H
			;P2 as input
			MOV A,#0FFH
			MOV P2,A
			SJMP CSONG

			ORG 000BH
			SJMP EXIT
			
			
			
CSONG:
			
			MOV A,P2
			CJNE A,#0FEH,SONG2
SONG1:
			MOV DPTR,#TABLE1
			SJMP START
SONG2:
			CJNE A,#0FDH,SONG3
			MOV DPTR,#TABLE2
			SJMP START
SONG3:
			CJNE A,#0FBH,SONG4
			MOV DPTR,#TABLE3
			SJMP START	
SONG4:
			CJNE A,#0F7H,SONG5
			MOV DPTR,#TABLE4
			SJMP START			
			
SONG5:
			CJNE A,#0FFH,CSONG
			SJMP CSONG

START:
			MOV B,A
			MOV TMOD,#1H
			MOV IE,#82H
			;MOV DPTR,#TABLE
			
			
LOOP:
			CLR A
			MOVC A,@A+DPTR
			MOV R1,A
			INC DPTR
			CLR A
			MOVC A,@A+DPTR
			MOV R0,A
			
			ORL A,R1
			JZ TIMING0             ;or,stop(R1=R0=00H)
			
			MOV A,R0
			ANL A,R1
			CJNE A,#0FFH,TIMING    ;and,finish(R1=R0=0FFH)
			JMP CSONG
			
TIMING:
			MOV TH0,R1           ;HIGH
			MOV TL0,R0
			SETB TR0
			JMP TIMING1

TIMING0: 
			CLR TR0

TIMING1:
			CLR A
			INC DPTR
			MOVC A,@A+DPTR
			MOV R2,A
			
LOOP1:  
			ACALL DELAY
			DJNZ R2,LOOP1
			INC DPTR
			JMP LOOP
EXIT:
			MOV TH0,R1
			MOV TL0,R0
			CPL P3.4
			RETI
			
DELAY:  
			MOV R7,#02
			
D2: 
			MOV R6,#187

D3: 
			MOV R5,#248
			DJNZ R5,$
			DJNZ R6,D3
			DJNZ R7,D2
			RET
			
TABLE1:
			DB 0FDH,080H,03H,   0FDH,80H,01H     ;H4,L4,beat
			DB 0FDH,0C6H,04H,   0FDH,80H,04H
			DB 0FEH,02AH,04H,   0FEH,02H,04H
			DB 000H,000H,04H
			DB 0FDH,080H,03H,   0FDH,80H,01H
			DB 0FDH,0C6H,04H,   0FDH,80H,04H
			DB 0FEH,05CH,04H,   0FEH,2AH,04H
			DB 000H,000H,04H
			DB 0FDH,080H,03H,   0FDH,80H,01H
			DB 0FEH,0C0H,04H,   0FEH,84H,04H
			DB 0FEH,02AH,04H,   0FEH,02H,04H
			DB 0FDH,0C6H,04H
			DB 0FEH,098H,03H,   0FEH,98H,01H
			DB 0FEH,084H,04H,   0FEH,2AH,04H
			DB 0FEH,05CH,04H,   0FEH,2AH,04H
			DB 000H,000H,04H
			DB 0FFH,0FFH
				
TABLE2:
			;1.  0F8H,94H,02H
			;2.  0F9H,5CH,02H
			;3.  0FAH,1AH,02H
			;4.  0FAH,6AH,02H
			;5.  0FBH,00H,02H
			;6.  0FBH,8CH,02H
			;7.  0FCH,0EH,02H
			;1   0FCH,4AH,02H
			;2   0FCH,0AEH,02H
			;3   0FDH,08H,02H
			;4   0FDH,30H,02H
			;5   0FDH,80H,02H
			;6   0FDH,0C6H,02H
			;7   0FEH,02H,02H
			;.1  0FEH,2AH,02H
			;.2  0FEH,5CH,02H
			;.3  0FEH,84H,02H
			;.4  0FEH,98H,02H
			;.5  0FEH,0C0H,02H
			;.6  0FEH,0E8H,02H
			;.7  0FFH,06H,02H
			DB 0FCH,4AH,02H,   0FCH,4AH,02H
			DB 0FCH,0AEH,04H,  0FDH,08H,04H
			DB 0FDH,08H,02H,   0FDH,08H,02H
				
			DB 00H,00H,02H,    0FDH,08H,02H
			DB 0FCH,0AEH,02H,  0FCH,4AH,02H
			DB 0FCH,0EH,04H,   0FDH,0C6H,02H
			DB 0FDH,80H,02H
				
			DB 00H,00H,02H,    0FDH,80H,05H
			DB 0FDH,0C6H,02H,  0FEH,02H,02H
			DB 0FEH,2AH,04H,   0FDH,08H,02H
			DB 0FDH,08H,02H
				
			DB 00H,00H,02H,    0FEH,2AH,02H
			DB 0FEH,02H,02H,   0FEH,2AH,02H
			DB 0FEH,02H,04H,   0FDH,08H,02H
			DB 0FDH,80H,04H

			DB 0FDH,80H,02H,   0FDH,0C6H,02H
			DB 0FEH,2AH,02H,   0FDH,80H,04H
			DB 0FDH,0C6H,02H
				
			DB 00H,00H,02H,    0FDH,0C6H,02H
			DB 0FDH,80H,02H,   0FDH,30H,02H
			DB 0FDH,80H,02H,   0FDH,08H,04H
			DB 0FCH,0AEH,02H,  0FCH,4AH,02H
				
			DB 0FBH,8CH,01H,   0FCH,4AH,01H
			DB 0FDH,08H,02H,   0FCH,0AEH,02H
			DB 0FCH,0AEH,02H,  0FCH,4AH,02H
			DB 0FCH,0AEH,02H,  0FDH,80H,04H
			DB 0FCH,4AH,02H,   0FCH,0AEH,08H
			DB 0FFH,0FFH
				
				
TABLE3:
			DB 0FDH,0C6H,01H,   0FEH,0E8H,01H
			DB 0FCH,0AEH,01H,   0FDH,008H,01H
			DB 0FDH,0C6H,01H,   0FEH,002H,01H
			DB 0FCH,0AEH,01H,   00H,00H,02H
			DB 0FDH,0C6H,01H,   0FEH,0E8H,01H
			DB 0FCH,0AEH,01H,   0FDH,008H,01H
			DB 0FDH,0C6H,01H,   0FEH,002H,01H
			DB 0FCH,0AEH,01H,   00H,00H,02H
			DB 0FDH,0C6H,01H,   0FEH,0E8H,01H
			DB 0FCH,0AEH,01H,   0FDH,008H,01H
			DB 0FDH,0C6H,01H,   0FEH,002H,01H
			DB 0FCH,0AEH,01H;,   0FDH,008H,01H
			DB 00H,00H,02H
			DB 0FDH,0C6H,01H,   0FEH,0E8H,01H
			DB 0FCH,0AEH,01H,   0FDH,008H,01H
			DB 0FDH,0C6H,01H,   0FEH,002H,01H
			DB 0FCH,0AEH,01H;,   0FDH,008H,01H
			DB 00H,00H,02H
			
			DB 0FFH,0FFH
				
TABLE4:
		
			
			DB 0FDH,08H,02H,   0FDH,80H,04H
			DB 0FDH,80H,02H,   0FDH,80H,02H
			DB 0FDH,08H,02H,   0FDH,80H,02H
			
			DB 0FDH,0C6H,04H,  0FDH,0C6H,02H
			DB 0FDH,08H,04H  
				
			DB 0FCH,0AEH,02H,  0FCH,4AH,04H
			DB 0FCH,4AH,02H,   0FCH,0AEH,04H
			DB 0FDH,80H,02H,   0FDH,08H,04H
			DB 0FDH,08H,04H
				
			
			
			DB 0FDH,08H,02H,   0FDH,80H,04H
			DB 0FDH,80H,02H,   0FDH,80H,02H
			DB 0FDH,08H,02H,   0FDH,80H,02H
			
			DB 0FDH,0C6H,04H,  0FDH,0C6H,02H
			DB 0FDH,08H,04H  
				
			DB 0FCH,0AEH,02H,  0FCH,4AH,04H
			DB 0FBH,00H,02H,   0FCH,0AEH,04H
			DB 0FDH,08H,02H,   0FCH,4AH,04H
			DB 0FCH,4AH,04H
			
			DB 0FFH,0FFH
				
				
			
			END